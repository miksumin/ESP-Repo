2.1.5(20251215)
Доработаны алгоритмы модуля Opentherm, в частности процедуры опроса читаемых параметров котла и процедуры обработки ошибок котла.

2.1.5(20251130)
Исправлены многие найденные ошибки и недочеты в работе алгоритмов переключения сетей WiFi/Ethernet, работе функциональных модулей Opentherm, Thermostat, представления данных на страницах веб-интерфейса.

2.1.5(20251120)
Исправлены найденные ошибки.

2.1.5(20251115)
Исправлена ошибка в алгоритме чтения данных по шине Opentherm, которая в некоторых случаях могла приводить к нечитаемости отдельных или всех параметров котла, в частности при работе с котлами Baxi Luna3.
Топик текущего статуса шины /Opentherm/Status переименован в /Opentherm/OTstatus. Топик HA discovery поправлен, достаточно удалить старый топик и обновить определение устройства. Добавлена публикация данных Opentherm в формате JSON в топиках /Opentherm/status, /Opentherm/sensors, /Opentherm/settings.

2.1.5(20250928)
Оптимизировано время ожидания подключения Ethernet при загрузке прошивки и отсутствии подключения кабеля (режим использования Ethernet активен по умолчанию, для отключения режима используется команда [eth_enable 0]).
Исправлены найденные ошибки и сделаны некоторые доработки в алгоритмах модулей Opentherm и Thermostat. В частности,
исправлена ошибка определения двухконтурного котла Buderus U072-24K и ошибка чтения уровня модуляции.
Финальный релиз текущей версии.

2.1.5(20250629)
Добавлена возможность выбора WiFi scan method с помощью команды [wifi_scan_mode] [1/2]. По умолчанию используется режим WIFI_FAST_SCAN [1]. Можно использовать режим WIFI_ALL_CHANNEL_SCAN [2] для выбора сети с бОльшим уровнем сигнала из нескольких доступных сетей с одинаковым SSID. Доработан алгоритм переключения режимов работы Ethernet/WiFi и переключения режимов WiFi (AP/STA/AP_STA). Добавлена режим static IP для Ethernet (eth_address, eth_netmask, eth_gateway, eth_dns). Добавлена проверка доступности Интернет и NTP сервера.

2.1.5(20250228)
Доработан алгоритм работы MQTT Controls. Добавлен параметр [mqtt_control_mode 0/1] для указания режима работы контрола пассивный/активный (slave/master). По умолчанию используется пассивный (slave) режим. В активном (master) режиме происходит управление базовым контролом через топик /SetState. Добавлена публикация HA Autodiscovery топиков для BLE счетчиков.

2.1.5(20250208)
Добавлена проверка доступности NTP сервера, который используется для синхронизации времени, единственной функции прошивки, требующей наличие доступа к Интернет. В случае отсутствия доступа данная функция отключается. Исправлена ошибка и доработан алгоритм чтения данных по шине Opentherm для котлов Viessmann Vitopend-100, Доработан алгоритм обработки ситуаций, при которых датчик по каким либо причинам прекращает присылать данные. Добавлена проверка доступности MQTT сервера, что актуально в случае, если используется внешний MQTT-брокер.

2.1.5(20241225)
Исправлена ошибка перевода котла в режим Idle [Opentherm - OFF] при перезагрузке контроллера.
Исправлена ошибка чтения темп ГВС для одноконтурных котлов, которые выдают ее в другом параметре как двухконтурные (например, Baxi Eco). Отключена функция непрерывной записи лог-файла в режиме "сдвига" содержимого по причине большого кол-ва времени, требуемого для полной перезаписи файла при добавлении новой строки при достижении максимального размера файла, что могло приводить к серьезным сбоям в алгоритмах взаимодействия с котлом, которые жестко регламентированы по промежуткам времени между отправкой и получением пакетов данных по шине Opentherm. Вместо этого реализован функционал для автоматического переименования текущего файла лога при достижении им максимального размера в файл "Runtime.bak" и продолжения записи лога в новый файл "Runtime.log". При следующей смене текущего файла лога старый автоматически удалется. Таким образом запись лога не прерывается, а история лога хранится в двух файлах - текущем и предыдущем. Реализована возможность подключения иконки, которая автоматически выводится на закладке веб-браузера, отображающей веб-интерейс прошивки. При отсутствии файла иконки "favicon.ico" он автоматически создается при старте прошивки и может быть заменен любым файлом иконки в соответствующем формате с помощью загрузки файла на странице "Files List". Всевозможные варианты иконок можно найти в Интернете и там же есть инструменты для преобразования графичеких файлов в формат "*.ico". Обычный размер иконки составляет 16х16 или 32х32 пикселя.

2.1.5(20241220)
Добавлено отдельное определение для двухконтурных котлов Buderus Logamax U072-18K/24K/35K.
Доработан алгоритм управления котлами линейки Viessmann Vitopend-100 при смене режима работы из-за особенностей работы данных моделей котлов. Добавлен принудительный апдейт режима работы котла командой термостата, если термостат включен и текущий режим бойлера не соответствует текущей команде термостата. Доработан алгоритм работы термостата для более корректного вычисления значений установленных границ работы термостата в режиме ON/OFF. Добавлен функционал для сохранения результатов опроса котла в виде файла в JSON-формате.

2.1.5(20241202)
MQTT-топики для работы механизма HA Autodiscovery теперь обновляются автоматически каждый раз при переподключении к MQTT-брокеру. Исправлена ошибка с работой контролов, настроенных для работы по изменению режимов работы котла.

2.1.5(20241130)
MQTT-топики для работы механизма HA Autodiscovery теперь публикуются с флагом "Retain". Для включения/выключения режима записи лога в файл без остановки при достижении максимального размера файла используется команда [log_shift 0/1]. При включении такого режима содержимое файла лога будет "сдвигаться" с удалением самых ранних строк лог-файла и добавлением новых записей. При рестарте записи лога предыдущий файл лога сохраняется с именем "Runtime.bak". Обратите внимание, что работа с лог-файлами использует много памяти, поэтому рекомендуется не увлекаться такими режимами работы, которые в нестандартной ситуации могут привести к сбою в работе прошивки. Используйте такой непрерывный режим записи лога только при необходимости поиска причин некорректного поведения прошивки.

2.1.5(20241125)
Выполнена доработка и оптимизация алгоритмов логирования работы прошивки, в том числе реализована возможность автоматического сохранения логов загрузки и работы в виде файлов, что может очень помочь при разборе ошибочных или нестандартных ситуаций. Полный лог загрузки автоматически сохраняется в файле "Startup.log", а лог работы в файле "Runtime.log". Для включения/выключения режима сохранения лога в процессе работы прошивки достаточно ввести команду [log_enable 0/1]. Максимальный размер лог-файла ограничен 8К, после чего сохранение лога автоматически прекращается. Также, как обычно, исправлены найденные ошибки и выполнены некоторые несущественные доработки алгоритмов прошивки. 

2.1.5(20241030)
Проведена очередная оптимизация и исправлены ошибки работы алгоритма опроса котла, в т.ч. исправлена критическая ошибка работы алгоритма, которая могла возникать при нажатии "Force scan" и приводить к остановке обмена данными с котлом.
В описание модели котла (в случае успешного определения по DataID[127]) добавлена информация о мощности котла.
Изменено название топиков для публикации и задания температуры термостата: /Temp(/SetTemp) -> /Target(/SetTarget)


2.1.5(20240909)
Добавлен функционал для нативной интеграции параметров работы прошивки в систему HomeAssistant, который автоматически формирует  в HA описание нескольких устройств - это собственно сам контроллер, котел (Boiler), Термостат и BLE датчики. Терморелеи и Контролы также добавлены в функционал HA Autodiscovery.
Изменены некоторые топики, а именно: /Thermostat/Temp (ранее /Thermostat/TSet), /Opentherm/CHtemp (ранее /Opentherm/CHTset) и /Opentherm/DHWtemp (ранее /Opentherm/DHWTSet).
Расширенный набор значений общих параметров работы прошивки теперь публикуется в формате JSON в топике /System/Info. Информация о доступности контроллера по прежнему публикуется в топике /System/Online

2.1.4(20231115)
Добработан алгоритм обработки сигналов по шине Opentherm для котлов линейки Baxi Eco и включен в стандартный алгоритм работы библиотеки. Теперь для корректной работы прошивки с котлами линейки Baxi Eco параметр ot_proto указывать не нужно (ot_proto 0). Для корректной работы прошивки с котлами Buderus необходимо использовать параметр ot_proto 1 (при корректном определении котла прошивка сама включит данный параметр). В случае сомнений в корректной работе прошивки с вашим котлом включаем параметр ot_debug 1 и смотрим ошибки в логе через COM-порт или по Telnet.

2.1.4(20231110)
Доработан алгоритм работы библиотеки Opentherm для более корректной обработки ошибок обмена данными по шине для котлов линейки Baxi. Исправлены ошибки в работе модуля Opentherm прошивки в части обновления текущих значений и доработан вывод отладочной информации об обмене данными по шине. Рекомендую всем обновиться.

2.1.4(20231031)
Длина переменной для хранения имени WIFi сети увеличена до 32 символов.
В конфиге исключено чтение параметра pid_setpoint, исправлена ошибка чтения параметра status_led_pin.
Изменены топики для публикацции и управления параметром ot_enable: теперь /OTenable - топик статуса, /SetOTenable - командный топик для управления. Также сделаны другие несущественные доработки.

2.1.4(20231029)
Исправлена ошибка в алгоритмах работы прошивки с файловой системой (critical).
Доработан алгоритм чтения и публикации данных проводных сенсоров типа 1-Wire и I2C в модуле Sensors. 
Добработан алгоритм работы с EEPROM для учета изменения размера блока данных в случае upgrade/downgrade.

2.1.4(20231026)
Исправлена ошибка в алгоритме работы модуля Opentherm (non-critical) и в алгоритме работы модуля Thermostat (non-critical). 
Функционал запуска управляемых устройств (контролов) по таймеру помимо MQTT Controls добавлен также для GPIO Controls.

2.1.4(20231025)
Добавлен вывод типа котла (одно или двухконтурный) в случае, если модель котла не удалось определить по идентификатору, передаваемому по Opentherm. Напомню, что тип котла задается в конфиге параметром boiler_type 1/2 (по умолчанию используется 1).
Добавлена возможность указания пределов расчетных значений ПИД-регулятора, которые имеют приоритет над значениями, полученными с котла, но не могут им противоречить. Для указания таких пределов в конфиге можно использовать параметры pid_calc_min и pid_calc_max с целочисленными значениями.
Добавлен параметр ot_proto, указывающий на вариант используемого алгоритма обработки сигналов по шине Opentherm (0 - 
стандартный вариант, который подходит для большинства котлов, 1 - доработанный вариант, который необходим для некоторых котлов, например Buderus, у которого при розжиге горелки плавают тайминги сигналов). По умолчанию используется ot_proto = 0.
Исправлена ошибка в работе MQTT controls, а также добавлена возможность включения MQTT control на заданное время с использованием таймера.

2.1.4(20231015)
Исправлена ошибка первичной инициализации параметра ot_enable при переходе с предыдущих релизов. Прошивки, уже работающие на текущем релизе (2.1.4), не требуют обновления.

2.1.4(20231012)
Исправлена ошибка инициализации BLE интерфейса при загрузке прошивке в отсутствии указанной в настройках WiFi сети. 

2.1.4(20230820)
Добавлен вывод параметра [18] [Water pressure in CH circuit] в веб-интерфейс и публикация в MQTT.

2.1.4(20230724)
Доработан алгоритм поведения прошивки при потере WiFi подключения к сети, при котором Исключен перевод прошивки в режим точки доступа за ненадобностью. Для включения такого режима можно добавить в конфиге параметр "wifi_use_AP 1". По умолчанию опция выключена, т.е. теперь при потере подключения к WiFi сети в процессе работы прошивка будет периодически пытаться восстановить подключение к сети, указанной в настройках, но не будет переходить в режим точки доступа. При загрузке прошивки и невозможности подключения к WiFi сети прошивка перейдет в режим точки доступа независимо от значения параметра wifi_use_AP. Таким образом, для перевода прошивки в режим точки доступа достаточно ее перезагрузить. При использовании подключения по Ethernet прошивка по умолчанию переводит модуль WiFi в режим выключено [OFF]. Также теперь при наличии подключения по Ethernet на основной странице веб-интерфейса добавлена возможность принудительного выбора режима работы WiFi - [AP/STA] или выключено [OFF].

2.1.4(20230714):
Доработан код алгоритов работы с GPIO & MQTT controls

2.1.4(20230630):
1. Добавлена возможность использования веб-авторизации.
Для этого использовать команду "web_auth 1". Логин по умолчанию "admin", пароль по умолчанию "esp32".
Для указания своего логина/пароля использовать команды "web_user XXXXX" и "web_pass XXXXX" соответственно.
2. Добавлена возможность указания имени домена MQTT-брокера вместо IP-адреса. Для этого использовать команду "mqtt_domain" вместо "mqtt_server".
3. Добавлена возможность полного отключения работы веб-интерфейса. Для этого использовать команду "http_enable 0".
Также для корневой страницы можно указать другую или полностью ее отключить. Для этого использовать команду "root_page", в которой указать имя страницы (например "opentherm") или значение "none".
4. Добавлено определение котла Bosch GAZ 6000
5. Добавлена возможность выключения работы Opentherm интерфейса. Для этого можно использовать команду "ot_enable 0/1" (по умолчанию включено). Для отображения переключателя в веб-интерфейсе можно использовать команду "ot_switch 0/1" (по умолчанию выключено).

2.1.3(20230331):
WiFi connect/disconnect algoritm fully refactored using WiFi Events
Modifired to use with Ethernet connect/disconnect algoritm
Added Opentherm standby mode when connecting WiFi and/or MQTT
Fix WiFi connection and other non-critical errors

2.1.3(20230302):
Modifired for use with ArduinoJson v6
Added support for Tasmota MQTT JSON format
Added Flame stop when boiler_temp+boiler_delta > pid_set_value
Modified OT Callback function algoritm for INVALID response and use original Opentherm library
Added ability to stop registration

2.1.2(20230108):
Added Boiler Lock-out Reset
Added Thermostat turn off when CH mode turn of

2.1.1(20221205):
Use ESP32 core ver.2.0.5

2.1.0(20221125):
Added Ethernet support for WT32-ETH01 board
Main Code mostly refactored
